<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Attendance</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <h2>Attendance Report for {{ session['instructor_name'] }}</h2>
            <a href="{{ url_for('dashboard') }}" class="btn">Dashboard</a>
        </div>
        
        <form method="POST" action="{{ url_for('view_attendance') }}" class="filter-form">
            <div class="form-group">
                <label for="start_date">From:</label>
                <input type="date" id="start_date" name="start_date" value="{{ filters.start_date }}">
            </div>
            <div class="form-group">
                <label for="end_date">To:</label>
                <input type="date" id="end_date" name="end_date" value="{{ filters.end_date }}">
            </div>
            <button type="submit" class="btn">Filter</button>
        </form>

        <div class="stats-summary">
            <span><strong>Total Records:</strong> {{ stats.total }}</span>
            <span><strong>Present:</strong> {{ stats.present }}</span>
            <span><strong>Absent:</strong> {{ stats.absent }}</span>
            <span><strong>Attendance Rate:</strong> {{ "%.1f"|format(stats.rate) }}%</span>
        </div>

        <div class="student-list">
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Student Name</th>
                        <th>Student ID</th>
                        <th>Class</th>
                        <th>Course</th>
                        <th>Status</th>
                        <th>Timestamp</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in records %}
                    <tr>
                        <td>{{ record.date }}</td>
                        <td>{{ record.fname }} {{ record.lname }}</td>
                        <td>{{ record.student_id }}</td>
                        <td>{{ record.class_name }}</td>
                        <td>{{ record.course_name }}</td>
                        <td class="status-{{ record.status }}">{{ record.status }}</td>
                        <td>{{ record.timestamp if record.timestamp else 'N/A' }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="7" style="text-align: center;">No records found for the selected criteria.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html> 